# -- Default number of instances to start 
replicaCount: 1
# -- Application name
name: signer
# -- Ovverwrites application name
nameOverride: ""

image:
  repository: code.europa.eu:4567/simpl/gaia-x-edc/poc-gaia-edc
  # -- Image name
  name: signer
  # -- Image tag
  # Uses .Chart.AppVersion if empty
  tag: "latest"
  # -- Image sha, usually generated by the CI
  # Uses image.tag if empty
  #sha: ""
  # -- Image pull policy
  pullPolicy: Always
  # -- Image pull secret when internal image is used
  #pullSecrets: deployment-key-light

secretEngine: dev
secretConfigPath: dev/gaiax-edc-dev-signer-signer

hashicorp:
  role: "gaiax-edc_role"

podAnnotations: {}

resources:
  requests:
    cpu: 25m
    memory: 64Mi
  limits:
    cpu: 150m
    memory: 128Mi

autoscaling:
  # -- Enable autoscaling
  enabled: false
  # -- Minimum replicas
  minReplicas: 1
  # -- Maximum replicas
  maxReplicas: 3
  # -- CPU target for autoscaling trigger
  targetCPUUtilizationPercentage: 70
  # -- Memory target for autoscaling trigger
  targetMemoryUtilizationPercentage: 70

metrics:
  # -- Enable prometheus metrics
  enabled: true
  # -- Port for prometheus metrics
  port: 2112

log:
  level: "debug"
  encoding: json


security:
  # -- by default, apps run as non-root
  runAsNonRoot: false
  # -- User used by the apps
  runAsUid: 0
  # -- Group used by the apps
  runAsGid: 0

service:
  port: 8080

signer:
  http:
    host: ""
    port: 8080

  nats:
    enabled: false


ingress:
  enabled: true
  annotations:
    cert-manager.io/cluster-issuer: "dev-prod"
    acme.cert-manager.io/http01-edit-in-place: "true"
    kubernetes.io/ingress.class: nginx
    nginx.ingress.kubernetes.io/rewrite-target: /$2
  tlsEnabled: true
  frontendDomain: signer.dataprovider01.int.simpl-europe.eu
  frontendTlsSecretName: signer-manager-tls

